<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Smart Itinerary – TheDogAtlas</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <style>
      /* Isolated Styles for the Smart Planner - No global impact */
      :root {
        --trip-primary: #ff7a4a;
        --trip-dark: #1c3250;
        --trip-bg: #fdfdfd;
        --trip-card: #ffffff;
      }

      .planner-main {
        background: var(--trip-bg);
        min-height: 100vh;
      }

      /* Hero Builder Section */
      .planner-hero {
        background: linear-gradient(
            rgba(28, 50, 80, 0.7),
            rgba(28, 50, 80, 0.7)
          ),
          url("Media/Planner/roadtripcar.jpeg") center/cover;
        padding: 60px 20px;
        text-align: center;
        color: white;
      }

      .planner-hero h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
        font-weight: 800;
      }

      /* Integrated Filters from Index */
      .planner-filter-grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 12px;
        max-width: 1200px;
        margin: 25px auto;
      }

      .planner-filter-group {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 8px;
        padding: 12px;
        text-align: left;
        color: var(--trip-dark);
      }

      .planner-filter-group h4 {
        margin: 0 0 10px 0;
        font-size: 0.75rem;
        text-transform: uppercase;
        color: var(--trip-primary);
        letter-spacing: 0.5px;
      }

      .planner-filter-options {
        display: flex;
        flex-direction: column;
        gap: 6px;
        font-size: 0.8rem;
      }

      /* Date and Destination Bar */
      .builder-container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        align-items: center;
      }

      .input-group {
        flex: 1;
        display: flex;
        flex-direction: column;
        text-align: left;
      }

      .input-group label {
        font-size: 0.7rem;
        font-weight: 700;
        color: var(--muted);
        text-transform: uppercase;
        margin-bottom: 5px;
      }

      .builder-container input {
        border: 1px solid #e0e2e8;
        padding: 10px;
        border-radius: 6px;
        font-size: 0.9rem;
        color: var(--trip-dark);
      }

      .generate-btn {
        background: var(--trip-primary);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 8px;
        font-weight: 700;
        cursor: pointer;
        align-self: flex-end;
      }

      /* Itinerary Results */
      .trip-container {
        max-width: 1200px;
        margin: 40px auto;
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 30px;
        padding: 0 20px;
      }

      .itinerary-main {
        background: var(--trip-card);
        border-radius: 16px;
        padding: 30px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      }

      .stop-card {
        display: flex;
        gap: 20px;
        margin-bottom: 30px;
        position: relative;
      }

      .stop-card:not(:last-child)::after {
        content: "";
        position: absolute;
        left: 20px;
        top: 40px;
        bottom: -30px;
        width: 2px;
        background: #f0f0f0;
      }

      .stop-time {
        min-width: 60px;
        font-weight: 800;
        color: var(--trip-primary);
        font-size: 0.85rem;
      }

      .stop-visual {
        width: 120px;
        height: 80px;
        border-radius: 8px;
        overflow: hidden;
        flex-shrink: 0;
      }

      .stop-visual img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .stop-tag {
        font-size: 0.65rem;
        background: #eefdf8;
        color: #1b8a6b;
        padding: 2px 8px;
        border-radius: 4px;
        font-weight: 700;
      }

      .dog-logic {
        background: #fff8f5;
        border-left: 3px solid var(--trip-primary);
        padding: 10px;
        margin-top: 10px;
        font-size: 0.8rem;
        color: #555;
      }

      .sidebar-column {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }
      .sidebar-widget {
        background: white;
        padding: 20px;
        border-radius: 16px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      }

      .ai-chat {
        background: var(--trip-dark);
        color: white;
      }

      @media (max-width: 1100px) {
        .planner-filter-grid {
          grid-template-columns: repeat(3, 1fr);
        }
      }

      @media (max-width: 768px) {
        .planner-filter-grid {
          grid-template-columns: 1fr;
        }
        .trip-container {
          grid-template-columns: 1fr;
        }
        .builder-container {
          flex-direction: column;
          align-items: stretch;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="brand">
        <a href="index.html">
          <img
            src="Media/Logo2.jpg"
            alt="TheDogAtlas Logo"
            style="height: 55px; width: auto"
          />
        </a>
      </div>
      <nav>
        <a href="index.html" class="nav-link">Map</a>
        <a href="planner.html" class="nav-link active">Planner</a>
        <a href="trails.html" class="nav-link">Trails</a>
        <a href="community.html" class="nav-link">Community</a>
      </nav>
    </header>

    <main class="planner-main">
      <section class="planner-hero">
        <h1>Smart Trip Planner</h1>
        <p>Curate your perfect dog-friendly journey.</p>

        <form onsubmit="event.preventDefault(); showTrip();">
          <div id="plannerFilters" class="planner-filter-grid">
            <div class="planner-filter-group">
              <h4>Food & Drink</h4>
              <div class="planner-filter-options">
                <label><input type="checkbox" /> Cafe & Tearoom</label>
                <label><input type="checkbox" /> Pubs & Bars</label>
                <label><input type="checkbox" /> Restaurants</label>
                <label><input type="checkbox" /> Dessert & Ice Cream</label>
              </div>
            </div>
            <div class="planner-filter-group">
              <h4>Retail</h4>
              <div class="planner-filter-options">
                <label><input type="checkbox" /> Shops</label>
                <label><input type="checkbox" /> Pet Stores</label>
                <label><input type="checkbox" /> Butchers</label>
                <label><input type="checkbox" /> Florist</label>
              </div>
            </div>
            <div class="planner-filter-group">
              <h4>Experience</h4>
              <div class="planner-filter-options">
                <label><input type="checkbox" /> Attractions</label>
                <label><input type="checkbox" /> Parks & Gardens</label>
                <label><input type="checkbox" /> Beaches</label>
                <label><input type="checkbox" /> Trails</label>
              </div>
            </div>
            <div class="planner-filter-group">
              <h4>Accommodations</h4>
              <div class="planner-filter-options">
                <label><input type="checkbox" /> Hotels</label>
                <label><input type="checkbox" /> B&Bs</label>
              </div>
            </div>
            <div class="planner-filter-group">
              <h4>Services</h4>
              <div class="planner-filter-options">
                <label><input type="checkbox" /> Vets</label>
                <label><input type="checkbox" /> Groomers</label>
                <label><input type="checkbox" /> Daycare</label>
                <label><input type="checkbox" /> Secure Fields</label>
              </div>
            </div>
          </div>

          <div class="builder-container">
            <div class="input-group">
              <label>Destination</label>
              <input
                type="text"
                id="destInput"
                value="St Albans, Hertfordshire"
              />
            </div>
            <div class="input-group">
              <label>Start Date</label>
              <input
                type="date"
                id="startDate"
                value="2025-06-01"
                onchange="calculateDuration()"
              />
            </div>
            <div class="input-group">
              <label>End Date</label>
              <input
                type="date"
                id="endDate"
                value="2025-06-03"
                onchange="calculateDuration()"
              />
            </div>
            <button type="submit" class="generate-btn">Build Itinerary</button>
          </div>
        </form>
      </section>

      <div id="tripOutput" class="trip-container hidden">
        <article class="itinerary-main">
          <div id="tripSummary" style="margin-bottom: 30px">
            <h2 id="dayCount" style="margin: 0">3 Day Trip to St Albans</h2>
            <span
              id="dateRangeText"
              style="color: var(--muted); font-size: 0.9rem"
              >June 1 - June 3, 2025</span
            >
          </div>

          <div class="stop-card">
            <div class="stop-time">09:30 AM</div>
            <div class="stop-visual">
              <img src="Media/Community/Community image 1.jpeg" />
            </div>
            <div class="stop-content">
              <span class="stop-tag">Breakfast</span>
              <h3>Street Café St Albans</h3>
              <div class="dog-logic">
                <strong>Dog Logic:</strong> Treats provided; calm atmosphere for
                morning pups.
              </div>
            </div>
          </div>

          <div class="stop-card">
            <div class="stop-time">11:30 AM</div>
            <div class="stop-visual">
              <img src="Media/Trails/panshanger park.jpg" />
            </div>
            <div class="stop-content">
              <span class="stop-tag">Activity</span>
              <h3>Verulamium Park</h3>
              <div class="dog-logic">
                <strong>Dog Logic:</strong> Extensive off-lead areas; very
                social environment.
              </div>
            </div>
          </div>
        </article>

        <aside class="sidebar-column">
          <div class="sidebar-widget ai-chat">
            <h4><i class="fa fa-robot"></i> Assistant</h4>
            <div style="font-size: 0.9rem">
              "I've updated your stats based on your 5 selected filters!"
            </div>
          </div>
          <div class="sidebar-widget">
            <h4>Trip Stats</h4>
            <div id="statList" style="font-size: 0.85rem; line-height: 2">
              <div>
                <i class="fa fa-calendar"></i> <span id="statDays">3</span> Days
              </div>
              <div><i class="fa fa-dog"></i> 100% Dog Friendly</div>
            </div>
          </div>
        </aside>
      </div>
    </main>

    <script>
      function calculateDuration() {
        const start = new Date(document.getElementById("startDate").value);
        const end = new Date(document.getElementById("endDate").value);

        if (start && end && end >= start) {
          const diffTime = Math.abs(end - start);
          const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;

          document.getElementById(
            "dayCount"
          ).textContent = `${diffDays} Day Trip to ${
            document.getElementById("destInput").value.split(",")[0]
          }`;
          document.getElementById("statDays").textContent = diffDays;

          const options = { month: "short", day: "numeric" };
          document.getElementById(
            "dateRangeText"
          ).textContent = `${start.toLocaleDateString(
            undefined,
            options
          )} - ${end.toLocaleDateString(undefined, options)}, 2025`;
        }
      }

      function showTrip() {
        calculateDuration();
        document.getElementById("tripOutput").classList.remove("hidden");
        window.scrollTo({ top: 500, behavior: "smooth" });
      }
    </script>

    <footer>
      <div class="footer-links">
        <a href="Footer/privacy.html">Privacy Policy</a>
        <a href="Footer/terms.html">Terms of Service</a>
        <a href="Footer/cookies.html">Cookie Policy</a>
        <a href="Footer/contact.html">Contact</a>
        <a href="Footer/about.html">About Us</a>
      </div>
      <div class="copyright">
        &copy; 2025 TheDogAtlas. The dog-first travel platform.
      </div>
    </footer>
  </body>
</html>
