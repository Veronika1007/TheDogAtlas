<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>TheDogAtlas â€“ Dogâ€‘Friendly Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <div class="brand">
        <img
          src="Media/Logo.png"
          alt="TheDogAtlas Logo"
          style="height: 36px; width: auto"
        />
        <div>
          <div style="font-weight: 700; font-size: 16px">TheDogAtlas</div>
          <div style="font-size: 11px; color: var(--muted)">
            The dog-first travel platform
          </div>
        </div>
      </div>
      <nav>
        <a href="index.html" class="nav-link active">Map</a>
        <a href="planner.html" class="nav-link">Planner</a>
        <a href="trails.html" class="nav-link">Trails</a>
        <a href="community.html" class="nav-link">Community</a>
      </nav>
    </header>

    <main>
      <section class="hero">
        <div>
          <div class="hero-tag">
            <span>ğŸ—ºï¸</span>
            <span>Hertfordshire Beta Â· Verified Venues Only</span>
          </div>
          <h1>Find dogâ€‘friendly pubs, stays & walking trails in seconds.</h1>
          <form
            class="hero-form"
            onsubmit="event.preventDefault(); demoSearch();"
          >
            <input
              id="whereInput"
              type="text"
              placeholder="Location (e.g. St Albans)"
              value="St Albans"
              style="margin-bottom: 10px; width: 100%"
            />
            <div class="multi-filter-container" id="categoryFilters">
              <label class="filter-option"
                ><input type="checkbox" value="pub" /> Pubs & Bars</label
              >
              <label class="filter-option"
                ><input type="checkbox" value="cafe" /> Cafe</label
              >
              <label class="filter-option"
                ><input type="checkbox" value="restaurant" /> Restaurants</label
              >
              <label class="filter-option"
                ><input type="checkbox" value="shop" /> Shops</label
              >
              <label class="filter-option"
                ><input type="checkbox" value="park" /> Parks</label
              >
              <label class="filter-option"
                ><input type="checkbox" value="hotel" /> Hotels</label
              >
            </div>
            <button type="submit" style="width: 100%">
              Search & Filter Map
            </button>
          </form>
        </div>
        <aside class="hero-card" style="text-align: center">
          <h3>Smart Planner</h3>
          <p>Build a curated day-by-day trip schedule.</p>
          <a
            href="planner.html"
            class="primary-btn"
            style="text-decoration: none; display: inline-block"
            >Open Planner</a
          >
        </aside>
      </section>

      <div class="panel">
        <h2>Interactive Map</h2>
        <div
          id="mapBox"
          style="
            height: 500px;
            border-radius: 12px;
            margin-bottom: 15px;
            border: 1px solid var(--border);
            z-index: 1;
          "
        ></div>
        <h2>Search Results</h2>
        <div class="results" id="resultsBox"></div>
      </div>
    </main>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
      const map = L.map("mapBox").setView([51.7527, -0.3394], 13);
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: "&copy; OpenStreetMap",
      }).addTo(map);
      let markersLayer = L.layerGroup().addTo(map);

      const demoVenues = [
        {
          name: "The Wagging Tail Pub",
          type: "pub",
          lat: 51.75,
          lng: -0.34,
          note: "Verified garden seating.",
        },
        {
          name: "Paws & Beans CafÃ©",
          type: "cafe",
          lat: 51.753,
          lng: -0.335,
          note: "Indoor dogs welcome.",
        },
      ];

      function demoSearch() {
        const selectedCats = Array.from(
          document.querySelectorAll("#categoryFilters input:checked")
        ).map((cb) => cb.value);
        let filtered = demoVenues.filter(
          (v) => selectedCats.length === 0 || selectedCats.includes(v.type)
        );
        markersLayer.clearLayers();
        filtered.forEach((v) => {
          L.marker([v.lat, v.lng])
            .addTo(markersLayer)
            .bindPopup(`<b>${v.name}</b><br>${v.note}`);
        });
        document.getElementById("resultsBox").innerHTML =
          filtered
            .map(
              (v) =>
                `<div class="result-card"><div><h3>${
                  v.name
                }</h3><small>${v.type.toUpperCase()}</small><p style="font-size: 12px; margin: 4px 0;">${
                  v.note
                }</p></div></div>`
            )
            .join("") || "<p>No results found.</p>";
      }
      demoSearch();
    </script>
  </body>
</html>
