<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>TheDogAtlas ‚Äì Dog‚ÄëFriendly Map & Planner</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
      // Center the map on Hertfordshire
      const map = L.map("mapBox").setView([51.7527, -0.3394], 12);

      // Use free OpenStreetMap tiles
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: "&copy; OpenStreetMap contributors",
      }).addTo(map);

      // Add a marker with your DogAtlas Logo!
      const dogIcon = L.icon({
        iconUrl: "Logo.png",
        iconSize: [32, 32],
        iconAnchor: [16, 32],
      });

      L.marker([51.7527, -0.3394], { icon: dogIcon })
        .addTo(map)
        .bindPopup("<b>St Albans</b><br>Start your dog-friendly trip here!");
    </script>
  </head>
  <body>
    <header>
      <div class="brand">
        <img
          src="Logo.png"
          alt="TheDogAtlas Logo"
          style="height: 36px; width: auto"
        />
        <div>
          <div style="font-weight: 700; font-size: 16px">TheDogAtlas</div>
          <div style="font-size: 11px; color: var(--muted)">
            The dog-first travel platform
          </div>
        </div>
      </div>
      <nav>
        <a
          href="#"
          onclick="showPage('map-page')"
          class="nav-link active"
          id="nav-map"
          >Map</a
        >
        <a
          href="#"
          onclick="showPage('planner-page')"
          class="nav-link"
          id="nav-planner"
          >Planner</a
        >
        <a href="#trails">Trails</a>
        <a href="#community">Community</a>
      </nav>
    </header>

    <main>
      <div id="map-page" class="page active">
        <section class="hero">
          <div>
            <div class="hero-tag">
              <span>üó∫Ô∏è</span>
              <span>Hertfordshire Beta ¬∑ 1,500+ Verified Venues</span>
            </div>
            <h1>Find dog‚Äëfriendly pubs, stays & walking trails in seconds.</h1>

            <form
              class="hero-form"
              onsubmit="event.preventDefault(); demoSearch();"
            >
              <input
                id="whereInput"
                type="text"
                placeholder="Location (e.g. St Albans)"
                value="Hertfordshire"
                style="margin-bottom: 10px; width: 100%"
              />

              <div class="multi-filter-container" id="categoryFilters">
                <label class="filter-option"
                  ><input type="checkbox" value="pub" /> Pubs & Bars</label
                >
                <label class="filter-option"
                  ><input type="checkbox" value="cafe" /> Cafes &
                  Restaurants</label
                >
                <label class="filter-option"
                  ><input type="checkbox" value="hotel" /> Hotels</label
                >
                <label class="filter-option"
                  ><input type="checkbox" value="trail" /> Walking Trails</label
                >
                <label class="filter-option"
                  ><input type="checkbox" value="vet" /> Vets & Groomers</label
                >
                <label class="filter-option"
                  ><input type="checkbox" value="park" /> Parks & Beaches</label
                >
              </div>

              <button type="submit" style="width: 100%">Apply Filters</button>
            </form>
          </div>
          <aside class="hero-card" style="text-align: center">
            <h3>Intelligent Planner</h3>
            <p>Ready to build a full trip schedule?</p>
            <button
              onclick="showPage('planner-page')"
              style="
                background: var(--accent);
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 99px;
                cursor: pointer;
              "
            >
              Open Planner
            </button>
          </aside>
        </section>

        <section class="layout">
          <div class="panel">
            <h2>Search Results</h2>
            <div class="results" id="resultsBox"></div>
          </div>
          <aside class="panel">
            <div class="map-placeholder" id="mapBox">
              <span id="mapText">Map View (Demo)</span>
            </div>
          </aside>
        </section>
      </div>

      <div id="planner-page" class="page"></div>
    </main>

    <script>
      function showPage(pageId) {
        document
          .querySelectorAll(".page")
          .forEach((p) => p.classList.remove("active"));
        document.getElementById(pageId).classList.add("active");
        document
          .querySelectorAll(".nav-link")
          .forEach((n) => n.classList.remove("active"));
        if (pageId === "map-page")
          document.getElementById("nav-map").classList.add("active");
        if (pageId === "planner-page")
          document.getElementById("nav-planner").classList.add("active");
      }

      const demoVenues = [
        {
          name: "The Wagging Tail Pub",
          type: "pub",
          location: "St Albans",
          note: "Verified garden, treats & bowls.",
        },
        {
          name: "Paws & Beans Caf√©",
          type: "cafe",
          location: "St Albans",
          note: "Indoor dogs welcome.",
        },
        {
          name: "Verulamium Riverside",
          type: "trail",
          location: "St Albans",
          note: "4.2km loop, off-lead fields.",
        },
        {
          name: "Herts Meadow Trail",
          type: "trail",
          location: "Hertfordshire",
          note: "3km woodland circuit.",
        },
        {
          name: "Dog‚ÄëFriendly Inn",
          type: "hotel",
          location: "Hertfordshire",
          note: "Pet-friendly rooms available.",
        },
      ];

      function demoSearch() {
        const where = document.getElementById("whereInput").value.toLowerCase();

        // Get all selected category values
        const selectedCategories = Array.from(
          document.querySelectorAll("#categoryFilters input:checked")
        ).map((cb) => cb.value);

        let filtered = demoVenues.filter((v) => {
          const matchLocation =
            !where || v.location.toLowerCase().includes(where);
          const matchCategory =
            selectedCategories.length === 0 ||
            selectedCategories.includes(v.type);
          return matchLocation && matchCategory;
        });

        renderResults(filtered);
      }

      function renderResults(filtered) {
        const box = document.getElementById("resultsBox");
        if (filtered.length === 0) {
          box.innerHTML =
            "<p style='font-size:12px; color:var(--muted)'>No venues found matching those selections.</p>";
          return;
        }
        box.innerHTML = filtered
          .map(
            (v) => `
          <div class="result-card">
            <div>
              <h3>${v.name}</h3>
              <small>${v.location} ¬∑ ${v.type.toUpperCase()}</small>
              <small style="color: var(--muted)">${v.note}</small>
            </div>
          </div>
        `
          )
          .join("");
      }

      demoSearch();
    </script>
  </body>
</html>
